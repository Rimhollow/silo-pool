<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: MySqlTableMixIn::EquiJoinTable</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (E)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../MySqlTableMixIn.html" title="MySqlTableMixIn (module)">MySqlTableMixIn</a></span></span>
     &raquo; 
    <span class="title">EquiJoinTable</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: MySqlTableMixIn::EquiJoinTable
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="Table.html" title="MySqlTableMixIn::Table (class)">Table</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="Table.html" title="MySqlTableMixIn::Table (class)">Table</a></span></li>
          
            <li class="next">MySqlTableMixIn::EquiJoinTable</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">/Users/fischer/WorkProjects/daitss2/silo-pool/lib/datyl/tables.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
Simple left inner join;  to do: add update/inserts in a transaction - let
the first specified table have any preconditions.
</p>


  </div>
</div>
<div class="tags">
  
</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="SiloPackagesTable.html" title="MySqlTableMixIn::SiloPackagesTable (class)">SiloPackagesTable</a></span></p>
</div>


  
  
  
  
  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#data_dictionary-instance_method" title="#data_dictionary (instance method)">- (Object) <strong>data_dictionary</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute data_dictionary.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#dbh-instance_method" title="#dbh (instance method)">- (Object) <strong>dbh</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute dbh.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#fields-instance_method" title="#fields (instance method)">- (Object) <strong>fields</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute fields.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#fields1-instance_method" title="#fields1 (instance method)">- (Object) <strong>fields1</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute fields1.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#fields2-instance_method" title="#fields2 (instance method)">- (Object) <strong>fields2</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute fields2.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#join1-instance_method" title="#join1 (instance method)">- (Object) <strong>join1</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute join1.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#join2-instance_method" title="#join2 (instance method)">- (Object) <strong>join2</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute join2.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#record_constructor-instance_method" title="#record_constructor (instance method)">- (Object) <strong>record_constructor</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute record_constructor.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#table1_name-instance_method" title="#table1_name (instance method)">- (Object) <strong>table1_name</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute table1_name.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#table2_name-instance_method" title="#table2_name (instance method)">- (Object) <strong>table2_name</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute table2_name.
</p>
</div></span>
  
</li>

    
  </ul>


  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (EquiJoinTable) <strong>initialize</strong>(connection, table1_name, table2_name, join1, join2, fields1 = [], fields2 = []) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
A new instance of EquiJoinTable.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#insert-instance_method" title="#insert (instance method)">- (Object) <strong>insert</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#select-instance_method" title="#select (instance method)">- (Object) <strong>select</strong>(where = nil, order = nil, limit = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
SELECT requires a block, and does minimal type casting - integers, boolean
strings to fixnums (or bignums).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update-instance_method" title="#update (instance method)">- (Object) <strong>update</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="Table.html" title="MySqlTableMixIn::Table (class)">Table</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Table.html#clauses-instance_method" title="MySqlTableMixIn::Table#clauses (method)">#clauses</a></span>, <span class='object_link'><a href="Table.html#count-instance_method" title="MySqlTableMixIn::Table#count (method)">#count</a></span>, <span class='object_link'><a href="Table.html#delete-instance_method" title="MySqlTableMixIn::Table#delete (method)">#delete</a></span>, <span class='object_link'><a href="Table.html#ids-instance_method" title="MySqlTableMixIn::Table#ids (method)">#ids</a></span>, <span class='object_link'><a href="Table.html#new_record-instance_method" title="MySqlTableMixIn::Table#new_record (method)">#new_record</a></span>, <span class='object_link'><a href="Table.html#prep-instance_method" title="MySqlTableMixIn::Table#prep (method)">#prep</a></span>, <span class='object_link'><a href="Table.html#query-instance_method" title="MySqlTableMixIn::Table#query (method)">#query</a></span>, <span class='object_link'><a href="Table.html#quote-instance_method" title="MySqlTableMixIn::Table#quote (method)">#quote</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="MySqlTableMixIn::EquiJoinTable (class)">EquiJoinTable</a></span></tt>) <strong>initialize</strong>(connection, table1_name, table2_name, join1, join2, fields1 = [], fields2 = []) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
A new instance of EquiJoinTable
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/silo-pool/lib/datyl/tables.rb', line 570</span>

<span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span> <span class='connection identifier id'>connection</span><span class='comma token'>,</span> <span class='table1_name identifier id'>table1_name</span><span class='comma token'>,</span> <span class='table2_name identifier id'>table2_name</span><span class='comma token'>,</span> <span class='join1 identifier id'>join1</span><span class='comma token'>,</span> <span class='join2 identifier id'>join2</span><span class='comma token'>,</span> <span class='fields1 identifier id'>fields1</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='fields2 identifier id'>fields2</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>

  <span class='@dbh ivar id'>@dbh</span>  <span class='assign token'>=</span> <span class='connection identifier id'>connection</span><span class='dot token'>.</span><span class='dbh identifier id'>dbh</span>
  <span class='@table1_name ivar id'>@table1_name</span>  <span class='assign token'>=</span> <span class='table1_name identifier id'>table1_name</span>
  <span class='@table2_name ivar id'>@table2_name</span>  <span class='assign token'>=</span> <span class='table2_name identifier id'>table2_name</span>
  <span class='@join1 ivar id'>@join1</span> <span class='assign token'>=</span> <span class='join1 identifier id'>join1</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
  <span class='@join2 ivar id'>@join2</span> <span class='assign token'>=</span> <span class='join2 identifier id'>join2</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>

  <span class='comment val'># bring in _escape, _query and _fields</span>

  <span class='case case kw'>case</span> <span class='connection identifier id'>connection</span><span class='dot token'>.</span><span class='vendor identifier id'>vendor</span>
  <span class='when when kw'>when</span> <span class='string val'>'postgres'</span>
    <span class='extend identifier id'>extend</span> <span class='PostgresTableMixIn constant id'>PostgresTableMixIn</span>
  <span class='when when kw'>when</span> <span class='string val'>'mysql'</span>
    <span class='extend identifier id'>extend</span> <span class='MySqlTableMixIn constant id'>MySqlTableMixIn</span>
  <span class='else else kw'>else</span>
    <span class='raise identifier id'>raise</span> <span class='dstring node'>&quot;Unsupported database #{connection.vendor}. Supported databases: 'mysql', 'postgres'.&quot;</span>
  <span class='end end kw'>end</span>

  <span class='@fields1 ivar id'>@fields1</span> <span class='assign token'>=</span>  <span class='_get_fields identifier id'>_get_fields</span><span class='lparen token'>(</span><span class='table1_name identifier id'>table1_name</span><span class='rparen token'>)</span>  <span class='if if_mod kw'>if</span> <span class='fields1 identifier id'>fields1</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
  <span class='@fields2 ivar id'>@fields2</span> <span class='assign token'>=</span>  <span class='_get_fields identifier id'>_get_fields</span><span class='lparen token'>(</span><span class='table2_name identifier id'>table2_name</span><span class='rparen token'>)</span>  <span class='if if_mod kw'>if</span> <span class='fields2 identifier id'>fields2</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>

  <span class='@fields ivar id'>@fields</span> <span class='assign token'>=</span> <span class='@fields1 ivar id'>@fields1</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='f identifier id'>f</span><span class='bitor op'>|</span> <span class='table1_name identifier id'>table1_name</span> <span class='plus op'>+</span> <span class='string val'>'.'</span> <span class='plus op'>+</span> <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='rbrace token'>}</span>  <span class='plus op'>+</span>  <span class='@fields2 ivar id'>@fields2</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='f identifier id'>f</span><span class='bitor op'>|</span> <span class='table2_name identifier id'>table2_name</span> <span class='plus op'>+</span> <span class='string val'>'.'</span> <span class='plus op'>+</span> <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='rbrace token'>}</span>

  <span class='recname identifier id'>recname</span> <span class='assign token'>=</span> <span class='connection identifier id'>connection</span><span class='dot token'>.</span><span class='vendor identifier id'>vendor</span><span class='dot token'>.</span><span class='capitalize identifier id'>capitalize</span>  <span class='plus op'>+</span> <span class='string val'>'_'</span> <span class='plus op'>+</span> <span class='ConnectionId constant id'>ConnectionId</span><span class='dot token'>.</span><span class='next identifier id'>next</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='plus op'>+</span> <span class='string val'>'_'</span> <span class='plus op'>+</span> <span class='table1_name identifier id'>table1_name</span><span class='dot token'>.</span><span class='capitalize identifier id'>capitalize</span> <span class='plus op'>+</span> <span class='string val'>'_'</span> <span class='plus op'>+</span> <span class='table2_name identifier id'>table2_name</span><span class='dot token'>.</span><span class='capitalize identifier id'>capitalize</span>

  <span class='@record_constructor ivar id'>@record_constructor</span> <span class='assign token'>=</span> <span class='Struct constant id'>Struct</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='recname identifier id'>recname</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='lparen token'>(</span><span class='@fields ivar id'>@fields</span><span class='dot token'>.</span><span class='map identifier id'>map</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='f identifier id'>f</span><span class='bitor op'>|</span> <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='string val'>'.'</span><span class='comma token'>,</span> <span class='string val'>'_'</span><span class='rparen token'>)</span><span class='rbrace token'>}</span><span class='rparen token'>)</span><span class='rparen token'>)</span>   <span class='comment val'># don't use dots in record constructor</span>

  <span class='ddl1 identifier id'>ddl1</span> <span class='assign token'>=</span> <span class='_build_data_dictionary identifier id'>_build_data_dictionary</span><span class='lparen token'>(</span><span class='table1_name identifier id'>table1_name</span><span class='comma token'>,</span> <span class='@fields1 ivar id'>@fields1</span><span class='rparen token'>)</span>
  <span class='ddl2 identifier id'>ddl2</span> <span class='assign token'>=</span> <span class='_build_data_dictionary identifier id'>_build_data_dictionary</span><span class='lparen token'>(</span><span class='table2_name identifier id'>table2_name</span><span class='comma token'>,</span> <span class='@fields2 ivar id'>@fields2</span><span class='rparen token'>)</span>

  <span class='ddl1 identifier id'>ddl1</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rec identifier id'>rec</span><span class='bitor op'>|</span> <span class='rec identifier id'>rec</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='table1_name identifier id'>table1_name</span> <span class='plus op'>+</span> <span class='string val'>'.'</span> <span class='plus op'>+</span> <span class='rec identifier id'>rec</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span> <span class='rbrace token'>}</span>
  <span class='ddl2 identifier id'>ddl2</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rec identifier id'>rec</span><span class='bitor op'>|</span> <span class='rec identifier id'>rec</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='table2_name identifier id'>table2_name</span> <span class='plus op'>+</span> <span class='string val'>'.'</span> <span class='plus op'>+</span> <span class='rec identifier id'>rec</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span> <span class='rbrace token'>}</span>

  <span class='@data_dictionary ivar id'>@data_dictionary</span> <span class='assign token'>=</span> <span class='ddl1 identifier id'>ddl1</span> <span class='plus op'>+</span> <span class='ddl2 identifier id'>ddl2</span>

  <span class='comment val'># Ensure our connection works up front</span>

  <span class='begin begin kw'>begin</span>
    <span class='raise identifier id'>raise</span> <span class='Store constant id'>Store</span><span class='colon2 op'>::</span><span class='ConfigurationError constant id'>ConfigurationError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Can't connect to #{vendor} database #{database}&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='lparen token'>(</span><span class='_query identifier id'>_query</span><span class='lparen token'>(</span><span class='string val'>&quot;SELECT 1+1&quot;</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='flatten identifier id'>flatten</span><span class='dot token'>.</span><span class='pop identifier id'>pop</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span> <span class='eq op'>==</span> <span class='integer val'>2</span><span class='rparen token'>)</span>
  <span class='rescue rescue kw'>rescue</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='e identifier id'>e</span>
    <span class='raise identifier id'>raise</span> <span class='Store constant id'>Store</span><span class='colon2 op'>::</span><span class='ConfigurationError constant id'>ConfigurationError</span><span class='comma token'>,</span> <span class='e identifier id'>e</span><span class='dot token'>.</span><span class='message identifier id'>message</span>
  <span class='end end kw'>end</span>

<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="data_dictionary-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="data_dictionary-instance_method">
  
    - (<tt>Object</tt>) <strong>data_dictionary</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute data_dictionary
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


568
569
570</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/silo-pool/lib/datyl/tables.rb', line 568</span>

<span class='def def kw'>def</span> <span class='data_dictionary identifier id'>data_dictionary</span>
  <span class='@data_dictionary ivar id'>@data_dictionary</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="dbh-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="dbh-instance_method">
  
    - (<tt>Object</tt>) <strong>dbh</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute dbh
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


568
569
570</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/silo-pool/lib/datyl/tables.rb', line 568</span>

<span class='def def kw'>def</span> <span class='dbh identifier id'>dbh</span>
  <span class='@dbh ivar id'>@dbh</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="fields-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="fields-instance_method">
  
    - (<tt>Object</tt>) <strong>fields</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute fields
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


568
569
570</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/silo-pool/lib/datyl/tables.rb', line 568</span>

<span class='def def kw'>def</span> <span class='fields identifier id'>fields</span>
  <span class='@fields ivar id'>@fields</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="fields1-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="fields1-instance_method">
  
    - (<tt>Object</tt>) <strong>fields1</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute fields1
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


568
569
570</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/silo-pool/lib/datyl/tables.rb', line 568</span>

<span class='def def kw'>def</span> <span class='fields1 identifier id'>fields1</span>
  <span class='@fields1 ivar id'>@fields1</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="fields2-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="fields2-instance_method">
  
    - (<tt>Object</tt>) <strong>fields2</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute fields2
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


568
569
570</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/silo-pool/lib/datyl/tables.rb', line 568</span>

<span class='def def kw'>def</span> <span class='fields2 identifier id'>fields2</span>
  <span class='@fields2 ivar id'>@fields2</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="join1-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="join1-instance_method">
  
    - (<tt>Object</tt>) <strong>join1</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute join1
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


568
569
570</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/silo-pool/lib/datyl/tables.rb', line 568</span>

<span class='def def kw'>def</span> <span class='join1 identifier id'>join1</span>
  <span class='@join1 ivar id'>@join1</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="join2-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="join2-instance_method">
  
    - (<tt>Object</tt>) <strong>join2</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute join2
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


568
569
570</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/silo-pool/lib/datyl/tables.rb', line 568</span>

<span class='def def kw'>def</span> <span class='join2 identifier id'>join2</span>
  <span class='@join2 ivar id'>@join2</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="record_constructor-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="record_constructor-instance_method">
  
    - (<tt>Object</tt>) <strong>record_constructor</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute record_constructor
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


568
569
570</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/silo-pool/lib/datyl/tables.rb', line 568</span>

<span class='def def kw'>def</span> <span class='record_constructor identifier id'>record_constructor</span>
  <span class='@record_constructor ivar id'>@record_constructor</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="table1_name-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="table1_name-instance_method">
  
    - (<tt>Object</tt>) <strong>table1_name</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute table1_name
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


568
569
570</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/silo-pool/lib/datyl/tables.rb', line 568</span>

<span class='def def kw'>def</span> <span class='table1_name identifier id'>table1_name</span>
  <span class='@table1_name ivar id'>@table1_name</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="table2_name-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="table2_name-instance_method">
  
    - (<tt>Object</tt>) <strong>table2_name</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute table2_name
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


568
569
570</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/silo-pool/lib/datyl/tables.rb', line 568</span>

<span class='def def kw'>def</span> <span class='table2_name identifier id'>table2_name</span>
  <span class='@table2_name ivar id'>@table2_name</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="insert-instance_method">
  
    - (<tt>Object</tt>) <strong>insert</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt>NotImplementedError</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


649
650
651</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/silo-pool/lib/datyl/tables.rb', line 649</span>

<span class='def def kw'>def</span> <span class='insert identifier id'>insert</span>
  <span class='raise identifier id'>raise</span> <span class='NotImplementedError constant id'>NotImplementedError</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="select-instance_method">
  
    - (<tt>Object</tt>) <strong>select</strong>(where = nil, order = nil, limit = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
SELECT requires a block, and does minimal type casting - integers, boolean
strings to fixnums (or bignums)
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/silo-pool/lib/datyl/tables.rb', line 618</span>

<span class='def def kw'>def</span> <span class='select identifier id'>select</span> <span class='where identifier id'>where</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='order identifier id'>order</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='limit identifier id'>limit</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>

  <span class='phrase identifier id'>phrase</span> <span class='assign token'>=</span>  <span class='dstring node'>&quot;SELECT #{fields.join(', ')} &quot;</span> <span class='plus op'>+</span>
              <span class='dstring node'>&quot;FROM #{table1_name}, #{table2_name} &quot;</span> <span class='plus op'>+</span>
             <span class='dstring node'>&quot;WHERE #{table1_name}.#{join1} = #{table2_name}.#{join2}&quot;</span> <span class='plus op'>+</span>
             <span class='clauses identifier id'>clauses</span><span class='lparen token'>(</span><span class='where identifier id'>where</span><span class='comma token'>,</span> <span class='order identifier id'>order</span><span class='comma token'>,</span> <span class='limit identifier id'>limit</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/WHERE/i</span><span class='comma token'>,</span> <span class='string val'>&quot;AND&quot;</span><span class='rparen token'>)</span>

  <span class='procs identifier id'>procs</span> <span class='assign token'>=</span> <span class='data_dictionary identifier id'>data_dictionary</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rec identifier id'>rec</span><span class='bitor op'>|</span> <span class='rec identifier id'>rec</span><span class='lbrack token'>[</span><span class='symbol val'>:cast</span><span class='rbrack token'>]</span> <span class='rbrace token'>}</span>         <span class='comment val'># array of cast procs or nils, in field order.</span>
  <span class='needs_cast identifier id'>needs_cast</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='procs identifier id'>procs</span><span class='dot token'>.</span><span class='each_index identifier id'>each_index</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='i identifier id'>i</span><span class='bitor op'>|</span> <span class='needs_cast identifier id'>needs_cast</span><span class='dot token'>.</span><span class='push identifier id'>push</span><span class='lparen token'>(</span><span class='i identifier id'>i</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='procs identifier id'>procs</span><span class='lbrack token'>[</span><span class='i identifier id'>i</span><span class='rbrack token'>]</span> <span class='rbrace token'>}</span>  <span class='comment val'># column indexes of procs we'll need to apply.</span>
  

  <span class='if if kw'>if</span> <span class='block_given? fid id'>block_given?</span>
    <span class='_query identifier id'>_query</span><span class='lparen token'>(</span><span class='phrase identifier id'>phrase</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='row identifier id'>row</span><span class='bitor op'>|</span>
      <span class='needs_cast identifier id'>needs_cast</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='i identifier id'>i</span><span class='bitor op'>|</span> <span class='row identifier id'>row</span><span class='lbrack token'>[</span><span class='i identifier id'>i</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='row identifier id'>row</span><span class='lbrack token'>[</span><span class='i identifier id'>i</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='integer val'>? </span><span class='nil nil kw'>nil</span> <span class='colon op'>:</span> <span class='procs identifier id'>procs</span><span class='lbrack token'>[</span><span class='i identifier id'>i</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='row identifier id'>row</span><span class='lbrack token'>[</span><span class='i identifier id'>i</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
      <span class='yield yield kw'>yield</span>  <span class='@record_constructor ivar id'>@record_constructor</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='row identifier id'>row</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='else else kw'>else</span>
    <span class='list identifier id'>list</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
    <span class='_query identifier id'>_query</span><span class='lparen token'>(</span><span class='phrase identifier id'>phrase</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='row identifier id'>row</span><span class='bitor op'>|</span>
      <span class='needs_cast identifier id'>needs_cast</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='i identifier id'>i</span><span class='bitor op'>|</span> <span class='row identifier id'>row</span><span class='lbrack token'>[</span><span class='i identifier id'>i</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='row identifier id'>row</span><span class='lbrack token'>[</span><span class='i identifier id'>i</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='integer val'>? </span><span class='nil nil kw'>nil</span> <span class='colon op'>:</span> <span class='procs identifier id'>procs</span><span class='lbrack token'>[</span><span class='i identifier id'>i</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='row identifier id'>row</span><span class='lbrack token'>[</span><span class='i identifier id'>i</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
      <span class='list identifier id'>list</span><span class='dot token'>.</span><span class='push identifier id'>push</span> <span class='@record_constructor ivar id'>@record_constructor</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='row identifier id'>row</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
    <span class='list identifier id'>list</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="update-instance_method">
  
    - (<tt>Object</tt>) <strong>update</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt>NotImplementedError</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


645
646
647</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/silo-pool/lib/datyl/tables.rb', line 645</span>

<span class='def def kw'>def</span> <span class='update identifier id'>update</span>
  <span class='raise identifier id'>raise</span> <span class='NotImplementedError constant id'>NotImplementedError</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Wed Jan 26 13:31:05 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.0 (ruby-1.8.7).
</div>

  </body>
</html>